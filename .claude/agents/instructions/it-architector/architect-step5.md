# Шаг 5: Пошаговое проектирование с подтверждением

## Цель
Детально проработать каждый аспект архитектуры с подтверждением от заказчика на каждом этапе.

## Формат выполнения каждого шага

```
=== ШАГ X.Y: [Название шага] ===
================================

Цель: 
[Четкое описание того, что мы достигаем на этом шаге]

Процесс размышления:
-------------------
1. [Первое рассуждение или анализ]
   - Почему это важно
   - Какие есть варианты

2. [Второе рассуждение]
   - Анализ альтернатив
   - Критерии выбора

3. [Выбор решения]
   - Почему выбрано именно это решение
   - Отвергнутые альтернативы и причины

Результат:
----------
[Детальное описание результата шага]

Для диаграмм:
```
[ASCII диаграмма или Mermaid синтаксис]
```

Для схем данных:
```kotlin
// Пример на Kotlin
data class Entity(
    val id: UUID,
    val name: String,
    // ...
)
```

Для API спецификаций:
```yaml
# OpenAPI пример
/api/v1/resource:
  get:
    summary: Получить список ресурсов
    parameters:
      - name: limit
        in: query
        type: integer
```

Обоснование решения:
-------------------
Преимущества:
✅ [Преимущество 1]: [Пояснение]
✅ [Преимущество 2]: [Пояснение]
✅ [Преимущество 3]: [Пояснение]

Компромиссы:
⚠️ [Компромисс 1]: [Что мы жертвуем и почему это приемлемо]
⚠️ [Компромисс 2]: [Что мы жертвуем и почему это приемлемо]

Риски и митигация:
❗ [Риск 1]: [Описание] → [Как митигируем]
❗ [Риск 2]: [Описание] → [Как митигируем]

Зависимости от других шагов:
- Требует: [Шаг X.X]
- Влияет на: [Шаг Y.Y]

---
✅ Пожалуйста, подтвердите этот шаг перед продолжением или укажите, что нужно изменить.
```

## Примеры типовых шагов

### Пример: Шаг 1.1 - High-level архитектура

```
=== ШАГ 1.1: Создание high-level архитектурной диаграммы ===

Цель: 
Определить основную структуру системы и взаимодействие компонентов

Процесс размышления:
1. Анализирую требования к системе...
2. Рассматриваю варианты: монолит, микросервисы, serverless...
3. Выбираю микросервисную архитектуру потому что...

Результат:
[Диаграмма и описание компонентов]
```

### Пример: Шаг 2.3 - Проектирование БД

```
=== ШАГ 2.3: Проектирование БД и схемы данных ===

Цель: 
Спроектировать эффективную схему данных для всех сущностей системы

Процесс размышления:
1. Анализ типов данных и паттернов доступа...
2. Выбор между SQL и NoSQL...
3. Проектирование схемы с учетом производительности...

Результат:
[ER-диаграмма и описание таблиц]
```

## Важные принципы

1. **Не переходите к следующему шагу без подтверждения**
2. **Будьте готовы вернуться и переделать шаг**
3. **Документируйте все решения и их обоснования**
4. **Сохраняйте контекст между шагами**