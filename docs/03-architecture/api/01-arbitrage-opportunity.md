# API

#### 1. Сущности
**Арбитражная возможность (Arbitrage Opportunity)**

| Поле              | Бизнес-описание                               | Пример значения               |
|-------------------|-----------------------------------------------|-------------------------------|
| tokenPair         | Торговая пара для арбитража                  | "BTC/USDT"                    |
| buyExchange       | Биржа для покупки (более низкая цена)        | "pancakeswap"                 |
| sellExchange      | Биржа для продажи (более высокая цена)       | "binance"                     |
| buyPrice          | Цена покупки на первой бирже                 | 43200.00                      |
| sellPrice         | Цена продажи на второй бирже                 | 43350.00                      |
| priceDifference   | Разница в ценах (в процентах)                | 0.35                          |
| timestamp         | Время обнаружения возможности                | "2024-01-15T14:35:12Z"        |
| status            | Статус: "active", "expired", "executed"      | "active"                      |

#### 2. Бизнес-функции (методы)
**CRUDS для арбитражных возможностей**
1. **`arbitrage.create`** - Создание новой арбитражной возможности
   - *Бизнес-правило*: Минимальная разница в цене должна быть > 0.1%
   - *Ограничения*: Данные цен не старше 30 секунд

2. **`arbitrage.update`** - Обновление статуса возможности
   - *Бизнес-правило*: Статус можно изменить только в определенной последовательности

3. **`arbitrage.read`** - Получение информации об арбитражной возможности
   - *Бизнес-правило*: Доступ только для авторизованных пользователей

4. **`arbitrage.delete`** - Удаление просроченной возможности
   - *Бизнес-правило*: Автоматическое удаление возможностей старше 1 часа

5. **`arbitrage.search`** - Поиск активных арбитражных возможностей
   - *Бизнес-логика*: Возвращает топ возможностей с пагинацией
   - *Фильтры*: По торговой паре, минимальной прибыли, типу бирж

**Специальные методы**
6. **`arbitrage.scan`** - Сканирование рынка на поиск новых возможностей
   - *Бизнес-логика*: Сравнивает цены всех доступных торговых пар между биржами
   - *Критерии обнаружения*:
      - Разница в ценах > 0.15% (с учетом комиссий)
      - Актуальные данные цен (< 1 минуты)
   - *Возвращает*: Список новых арбитражных возможностей с ранжированием по прибыли

#### 3. Бизнес-правила
1. **Статусы возможностей**:
   - `active`: Возможность действительна и может быть исполнена
   - `expired`: Возможность устарела (данные старше 5 минут)
   - `cancelled`: Возможность отменена из-за изменения условий

2. **Критерии прибыльности**:
   - Минимальная прибыль: 0.15% после всех комиссий
   - Учет комиссий CEX: обычно 0.1-0.25%
   - Учет газа DEX: динамически рассчитывается
   - Проскальзывание (slippage): максимум 0.5%

3. **Ограничения по рискам**:
   - Максимальный объем сделки: $50,000
   - Максимальное время исполнения: 60 секунд
   - Минимальная ликвидность на бирже: $100,000

#### 4. Бизнес-метрики успеха
1. **Скорость обнаружения**: 95% возможностей обнаруживаются в течение 1 секунды
2. **Точность прогнозов**: Фактическая прибыль отклоняется от прогноза < 10%
3. **Успешность исполнения**: 85% арбитражных сделок исполняются успешно
4. **Ограничения**:
   - Базовые пользователи: 10 активных возможностей одновременно
   - Premium пользователи: 50 активных возможностей одновременно
   - Институциональные: без ограничений