# API

#### 1. Сущности
**Рыночная цена (Market Price)**

| Поле          | Бизнес-описание                               | Пример значения               |
|---------------|-----------------------------------------------|-------------------------------|
| tokenPair     | Торговая пара токенов                        | "BTC/USDT"                    |
| exchange      | Биржа-источник цены                          | "binance"                     |
| exchangeType  | Тип биржи: "dex" (децентрализованная), "cex" (централизованная) | "cex"            |
| price         | Текущая цена токена (в базовой валюте)       | 43250.50                      |
| timestamp     | Временная метка получения данных             | "2024-01-15T14:30:00Z"        |

#### 2. Бизнес-функции (методы)
**CRUDS для рыночных цен**
1. **`prices.create`** - Запись новой цены с биржи
   - *Бизнес-правило*: Только авторизованные парсеры могут записывать цены
   - *Ограничения*: Цена должна быть положительной

2. **`prices.update`** - Обновление существующей цены
   - *Бизнес-правило*: Обновление возможно только если новая цена отличается от текущей

3. **`prices.read`** - Получение актуальной цены по торговой паре
   - *Бизнес-правило*: Возвращает последнюю цену не старше 30 секунд

4. **`prices.delete`** - Удаление устаревших данных
   - *Бизнес-правило*: Автоматическое удаление данных старше 24 часов

5. **`prices.search`** - Поиск цен по фильтрам
   - *Бизнес-логика*: Поиск по торговой паре, бирже, временному диапазону
   - *Фильтры*: По типу биржи, минимальному объему, временной период

**Специальные методы**
6. **`prices.compare`** - Сравнение цен между биржами
   - *Бизнес-логика*: Возвращает разницу в ценах для одной торговой пары на разных биржах
   - *Критерии сравнения*:
      - Одинаковая торговая пара
      - Данные не старше 1 минуты
   - *Возвращает*: Список пар бирж с разницей в процентах

#### 3. Бизнес-правила
1. **Актуальность данных**:
   - `fresh`: Данные не старше 30 секунд
   - `stale`: Данные от 30 секунд до 5 минут
   - `expired`: Данные старше 5 минут (не используются)

2. **Валидация цен**:
   - Цена должна быть положительной

3. **Ограничения для источников**:
   - DEX: Минимальная ликвидность $1,000
   - CEX: Минимальный объем торгов $10,000/24ч
   - Максимум 100 запросов в секунду на биржу

#### 4. Бизнес-метрики успеха
1. **Скорость получения данных**: 95% цен должны обновляться в течение 5 секунд
2. **Покрытие рынка**: Данные от минимум 2 основных бирж для каждой торговой пары
3. **Ограничения**:
   - Базовые пользователи: 60 запросов/минуту
   - Premium пользователи: 600 запросов/минуту
   - API партнеры: 6000 запросов/минуту